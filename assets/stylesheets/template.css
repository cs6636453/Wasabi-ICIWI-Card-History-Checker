body {
    margin: 0;
    padding: 0;
    left: 0;
    right: 0;
    font-family: "Poppins", sans-serif;
    font-weight: 400;
    font-style: normal;
}

nav {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    width: 100%;              /* background fills the whole screen */
    background-color: white;
    padding-top: 20px;
    padding-bottom: 20px;

    display: flex;
    justify-content: center;
    margin: 0;

    box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.15); /* shadow above */

    z-index: 999;
}

nav a {
    flex: 1;                 /* each link takes equal space */
    text-align: center;       /* center the icon inside */
    color: gray;
    text-decoration: none;
}

nav a span {
    display: inline-block;
    font-size: 48px;
    transform: scale(1.5);
}

nav a.active {
    color: darkcyan;
}

header {
    display: flex;
    background-color: white;
    padding: 10px;
    position: sticky;
    top: 0;
    z-index: 999;
}

header h1 {
    padding-top: 7px;
    color: black;
    margin: 0 0 0 10px;
    font-weight: normal;
}

header img {
    width: 64px;
    height: 64px;
}

#card img {
    width: 300px;
    height: auto;
    border-radius: 20px;
    display: block;
    margin: 30px auto 0;
}

#card {
    position: relative; /* make this the positioning context */
    display: inline-block;
    width: 100%;
    text-align: center;
}

#card p {
    position: absolute;
    top: 40px;    /* adjust as needed */
    left: calc(50% - 150px + 20px);   /* adjust as needed */
    margin: 0;
    color: white;
    font-size: 22px;
}

/* 40 75 140 175 */

#card p#card_balance {
    top: 75px;
    font-size: 30px;
}

#card p#card_number {
    top: 175px; /* 140px */
}

#card p#card_name {
    top: 175px;
}

#transit_history, #my_account {
    margin: 0 15px 100px;
}

#desktop_header {
    display: none;
}

.popup button.top-close {
    position: absolute;
    top: 10px;
    right: 10px;
    font-size: 24px;
    font-weight: bold;
    background: none;
    border: none;
    color: #888;
    cursor: pointer;
    transition: color 0.2s;
}

.popup button.top-close:hover, .popup button.top-close:focus, .popup button.top-close:active {
    color: #333;
}

#payment_history {
    margin: 0 15px 85px;
}

#my_account {
    margin-top: 30px;
    width: calc(100% - 30px);
    text-align: center;
}

.card_pc {
    display: none;
}

#unbind_card {
    border: none;
    width: 250px;
    background-color: red;
    color: white;
    font-size: 20px;
    border-radius: 40px;
    padding-top: 10px;
    padding-bottom: 10px;
    height: 50px;
}

#unbind_card:active, #unbind_card:focus, #unbind_card:hover {
    border: 4px solid red;
    width: 250px;
    background-color: white;
    color: red;
    font-size: 20px;
    border-radius: 40px;
    padding-top: 10px;
    padding-bottom: 10px;
    height: 50px;
}

#unbind_card_pc:active, #unbind_card_pc:focus, #unbind_card_pc:hover {
    border: 4px solid red;
    width: 250px;
    background-color: white;
    color: red;
    font-size: 20px;
    border-radius: 40px;
    padding-top: 10px;
    padding-bottom: 10px;
    height: 50px;
}

.payment_header, .transit_header, .account_header {
    font-size: 20px;
    font-weight: bold;
    margin-bottom: 10px;
}

.payment_details {
    display: flex;
    margin-top: 10px;
    margin-bottom: 10px;
    align-items: center;
    height: 50px;
}

.transit_details {
    position: relative; /* make this the positioning context */
    display: block;
    margin-top: 10px;
    margin-bottom: 20px;
    height: auto;
}

.transit_drawmap {
    display: flex;
    align-items: center;
    height: 23px;
}

.transit_pass {
    background-color: mediumseagreen;
    font-size: 14px;
    text-align: center;
    width: fit-content;
    padding: 0 7px;
    color: white;
    margin-top: 7px;
    margin-left: 30px;
}

.drawmap_dest {
    margin-bottom: 15px;
}

.transit_fare_detail {
    display: flex;
}

.transit_fare {
    border: 2px solid black;
    font-size: 14px;
    text-align: center;
    width: fit-content;
    padding: 0 7px;
    color: black;
    margin-top: 7px;
    margin-left: 30px;
}

.transit_osi {
    display: flex;
    background-color: darkcyan;
    font-size: 14px;
    text-align: center;
    width: fit-content;
    padding: 0 7px;
    color: white;
    margin-top: 7px;
    margin-left: 5px;
    align-items: center;
}

.transit_time {
    font-size: 12px;
    color: gray;
    width: 50px;         /* fixed width for time */
    text-align: right;   /* right-align inside its own box */
    margin-right: 2px;  /* spacing before the dot */
    flex-shrink: 0;      /* prevent shrinking */
    margin-left: 39px;
}

.transit_date {
    font-size: 18px;
    margin-left: 20px;
    font-weight: bold;
    color: darkslategray;
    margin-bottom: 10px;
}

.transit_line {
    width: 5px;
    background-color: black;
    height: 15px;
    margin-left: 108px;
    position: relative; /* needed for pseudo-elements */
}

.transit_line::before,
.transit_line::after {
    content: '';
    position: absolute;
    left: 0;
    width: 5px;
    background-color: black;
}

.transit_line::before {
    top: -5px;       /* extend above */
    height: 5px;     /* extension length */
}

.transit_line::after {
    bottom: -5px;    /* extend below */
    height: 5px;     /* extension length */
}

.transit_drawmap span {
    margin-left: 12px;
    color: mediumseagreen;
}

.transit_station {
    margin-left: 12px;
}

.transit_dot {
    width: 7px;
    height: 7px;
    border-radius: 50%;
    border: 4px solid black;
    margin-left: 12px;
}

.payment_details span {
    font-size: 36px;
    transform: scale(1.0);
    color: mediumseagreen;
}

.payment_datetime {
    font-size: 12px;
    color: dimgray;
    margin: 0 0 0 7px;
}

#unbind_card_pc {
    display: none;
}

.payment_title {
    font-size: 16px;
    color: black;
    margin: 0 0 0 7px;
}

.payment_text {
    display: inline-block;
}

.payment_total {
    font-size: 20px;
    width: auto;
    text-align: right;
    flex: 1;
}

.positive {
    color: limegreen;
}

.negative {
    color: firebrick;
}

#payment_history {
    /*display: none;*/
}

#transit_history {
    /*display: none;*/
}

#my_account {
    /*display: none;*/
}

.nav_text {
    display: none;
}

@media only screen and (min-width: 1024px) {

    .nav_text {
        display: block;
        margin-left: 20px;
    }

    nav a {
        flex: 0 0 auto;      /* don't stretch, width fits content */
        display: flex;        /* keep icon + text side by side */
        margin: 0 15px;       /* spacing between links */
    }

    nav a span {
        margin-right: 8px;    /* optional, space between icon and text */
    }

    #card {
        position: fixed;    /* fixes card on the left */
        top: 150px;             /* start from top */
        left: 0;            /* stick to left */
        width: 50%;         /* take half screen */
        height: 100vh;      /* full height */
        overflow: auto;     /* scroll inside if card content is tall */
        padding: 15px;
        box-sizing: border-box;
    }

    #card p {
        top: 55px;
    }

    /* 40 75 140 175 */

    #card p#card_balance {
        top: 90px;
        font-size: 30px;
    }

    #card p#card_number {
        top: 190px; /* 155px */
    }

    #card p#card_name {
        top: 190px;
    }

    #unbind_card_pc {
        display: block;
        border: none;
        margin-left: auto;
        margin-right: auto;
        width: 250px;
        background-color: red;
        color: white;
        font-size: 20px;
        border-radius: 40px;
        padding-top: 10px;
        padding-bottom: 10px;
        margin-top: 20px;
        height: 50px;
    }

    /* Left panel: card form */
    #card_form {
        position: fixed;
        top: 150px;         /* same as #card top */
        left: 0;
        width: 30%;
        height: calc(100vh - 150px); /* full height minus header */
        overflow-y: auto;   /* scroll if content taller */
        padding: 20px;
        box-sizing: border-box;
    }

    /* Right panel: card binding + other content */
    #card_binding {
        position: fixed;
        top: 150px;
        right: 0;          /* starts from middle */
        width: 50%;
        height: calc(100vh - 150px);
        overflow-y: auto;
        padding: 20px;
        box-sizing: border-box;
    }

    #transit_history,
    #payment_history,
    #my_account {
        width: 50%;               /* right panel width */
        margin-left: 50%;         /* move it to the right of the fixed card */
        padding: 15px;
        box-sizing: border-box;
    }

    #go_account {
        display: none;
    }

    nav {
        bottom: auto;
        top: 84px;
        left: 0;
        right: 0;
        width: 100%;              /* background fills the whole screen */
        background-color: white;

        display: flex;
        justify-content: center;
        margin: 0;

        box-shadow: 0 2px 10px rgba(0,0,0,0.15); /* shadow above */
        z-index: 999;

        padding: 0;
    }

    nav a {
        margin-top: 10px;
        margin-bottom: 10px;
        padding: 10px 20px;
        text-align: left;       /* center the icon inside */
        color: gray;
        text-decoration: none;
    }

    nav a span {
        display: inline-block;
        font-size: 48px;
        transform: scale(1.5);
    }

    nav a.active {
        background-color: darkcyan;
        color: white;
    }

    #mobile_header {
        display: none;
    }

    #desktop_header {
        display: block;
    }

    #payment_history, #transit_history, #my_account {
        margin-bottom: 0;
        padding-bottom: 0;
    }

    .card_pc {
        display: block;
    }

    .binding_desktop {
        margin-top: 25px;
    }

    .card_input input {
        margin-top: 1px;
    }
}

/* Fullscreen loader overlay */
#loader {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: white; /* or any background color */
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 9999;
    transition: opacity 0.5s ease, visibility 0.5s ease;
}

/* Hide when done */
#loader.hidden {
    opacity: 0;
    visibility: hidden;
}

.hidden {
    display: none;
}

/* Spinner */
.spinner {
    width: 60px;
    height: 60px;
    border: 6px solid #ddd;
    border-top: 6px solid #3498db;
    border-radius: 50%;
    animation: spin 1s linear infinite;
}

@keyframes spin {
    0%   { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

footer {
    margin: 20px;
    color: gray;
    font-size: 14px;
}

.overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0,0,0,0.5);
    display: none; /* hidden by default */
    justify-content: center;
    align-items: center;
    z-index: 999;
}

/* Popup box */
.popup {
    background: white;
    padding: 20px 30px;
    border-radius: 10px;
    text-align: center;
    min-width: 300px;
    box-shadow: 0 5px 20px rgba(0,0,0,0.3);
    position: relative;
}

.popup .close-btn {
    top: 50px;
    right: 100px;
    cursor: pointer;
    font-size: 18px;
    font-weight: bold;
    border: none;
    background: none;
}

.popup button:not(.top-close) {
    border: none;
    width: 250px;
    background-color: darkcyan;
    color: white;
    font-size: 20px;
    border-radius: 40px;
    padding-top: 10px;
    padding-bottom: 10px;
    margin-top: 30px;
    margin-bottom: 10px;
    height: 50px;
}

.popup button:not(.top-close):hover, .popup button:not(.top-close):focus, .popup button:not(.top-close):active {
    border: 4px solid darkcyan;
    width: 250px;
    background-color: white;
    color: darkcyan;
    font-size: 20px;
    border-radius: 40px;
    padding-top: 10px;
    padding-bottom: 10px;
    margin-top: 30px;
    margin-bottom: 10px;
    height: 50px;
}

.popup button.confirm:hover, .popup button.confirm:focus, .popup button.confirm:active {
    border: 4px solid mediumseagreen;
    width: 250px;
    background-color: white;
    color: mediumseagreen;
    font-size: 20px;
    border-radius: 40px;
    padding-top: 10px;
    padding-bottom: 10px;
    margin-top: 30px;
    margin-bottom: 10px;
    height: 50px;
}

.popup button.confirm {
    border: none;
    width: 250px;
    background-color: mediumseagreen;
    color: white;
    font-size: 20px;
    border-radius: 40px;
    padding-top: 10px;
    padding-bottom: 10px;
    margin-top: 30px;
    margin-bottom: 10px;
    height: 50px;
}

#card_form {
    margin: 0 20px 20px;
}

#card_form p {
    color: gray;
    font-size: 24px;
    margin-bottom: 0;
}

.card_input {
    display: flex;
    align-items: center;
}

.card_input label {
    font-size: 30px;
    height: 46px;
}

.card_input input {
    border: none;
    border-bottom: 2px solid gray;
    height: 40px;
    width: calc(100% - 5px);
    font-size: 28px;
}

.binding_notice_2 span.bind_card_next {
    color: dimgray;
}

#bind_button {
    border: none;
    background-color: mediumseagreen;
    color: white;
    font-size: 20px;
    border-radius: 40px;
    padding-top: 10px;
    padding-bottom: 10px;
    height: 50px;
    width: 100%;
    margin-top: 25px;
}

#card_binding {
    position: fixed;
    bottom: 0;
}

#bind_button:hover, #bind_button:focus, #bind_button:active {
    border: 4px solid mediumseagreen;
    background-color: white;
    color: mediumseagreen;
    font-size: 20px;
    border-radius: 40px;
    padding-top: 10px;
    padding-bottom: 10px;
    height: 50px;
    width: 100%;
    margin-top: 25px;
}

.card_input input:focus, .card_input input:hover, .card_input input:active {
    border: none;
    border-bottom: 2px solid gray;
    outline: none;
}

#card_form p.card_hint {
    font-size: 14px;
}

.binding_notice {
    display: flex;
    align-items: center;
    height: 50px;
}

.binding_notice_2 {
    display: flex;
    height: 70px;
}

@media only screen and (max-width: 560px) {
    .binding_notice_2 {
        height: 100px;
    }
}

.binding_notice_2 span {
    margin-top: 20px;
    font-size: 40px;
}

.binding_notice_2 p {
    margin-left: 15px;
    font-size: 16px;
}

.binding_notice_2 span, .binding_notice_2 p {
    transform: scale(1.0);
    color: black;
}

p.bind_card_next {
    color: dimgray;
}

.binding_notice span{
    font-size: 48px;
}

.binding_notice span, .binding_notice p {
    transform: scale(1.0);
    color: #ffbf00;
}

.binding_notice p {
    margin-left: 15px;
    font-size: 36px;
    font-weight: bold;
}

#card_binding {
    margin: 20px;
}

p#hint_error {
    margin-top: 5px;
    font-size: 14px;
    color: red;
}