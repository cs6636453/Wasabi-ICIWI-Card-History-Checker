<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Wasabi IC Card</title>
    <script src="api/loading.js"></script>
    <script>
        // function to read a cookie by name
        function getCookie(name) {
            const value = `; ${document.cookie}`;
            const parts = value.split(`; ${name}=`);
            if (parts.length === 2) return decodeURIComponent(parts.pop().split(';')[0]);
            return null;
        }

        // check for iciwi_serial on page load
        document.addEventListener("DOMContentLoaded", function() {
            const card = getCookie("iciwi_serial");
            if (card) {
                // redirect to result page with the card
                window.location.href = "result/v2/?card=" + encodeURIComponent(card);
            } else {
                // no card bound â†’ go to default page
                window.location.href = "transit_enquiry/";
            }
        });
    </script>
</head>
<body>
<div id="loading_overlay">
    <div class="spinner"></div>
</div>
<!-- For redirect only -->
</body>
</html>
